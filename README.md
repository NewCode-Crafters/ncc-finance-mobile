# Bytebank (NCC Finance Mobile)

A Flutter mobile application for personal finance management. Bytebank (package name: `bytebank`) is an educational/demo app that demonstrates common finance features: authentication, transactions, balance tracking, investments, profile management, charts, and Firebase integration.

## Key features

- Email/password authentication (Firebase Auth)
- User profiles with image upload (Firebase Storage + Firestore)
- Transactions: create, edit, list and chart views (Cloud Firestore)
- Dashboard with balance and overview charts (fl_chart)
- Investments: create and list investments
- Localization for Brazilian Portuguese (`pt_BR`)
- State management using `provider`

## Quick facts

- **Project name (pubspec):** `bytebank`
- **Flutter SDK constraint:** `>=3.8.1 <4.0.0`
- **Supported locale:** `pt_BR` (Brazilian Portuguese)
- **Firebase:** Uses `firebase_options.dart` (generated). Place `google-services.json` in `android/app/` and `GoogleService-Info.plist` in `ios/Runner/`.
- **Assets:** `assets/images/` contains app icons and splash images

## Table of contents

- [Project structure](#project-structure)
- [Getting started](#getting-started)
- [CI/CD](#ci-cd)
- [Available commands](#available-commands)
- [Development notes](#development-notes)
- [Key packages](#key-packages)
- [Troubleshooting](#troubleshooting)
- [Unit tests](#unit-tests)
- [Authors](#authors)
- [External links](#external-links)

## Project structure

Repository top-level (visualized):

```
.
├── android/
├── ios/
├── lib/
│   ├── core/                # constants, widgets, services, utils, validators
│   ├── features/            # feature modules: authentication, dashboard, transactions, investments, profile, splash, pokemons
│   │   ├── authentication/
│   │   ├── dashboard/
│   │   ├── transactions/
│   │   ├── investments/
│   │   ├── profile/
│   │   └── splash/
│   ├── firebase_options.dart# generated Firebase config
│   ├── main.dart            # app entrypoint + Provider registration
│   └── theme/
├── assets/
│   └── images/              # logos and splash screens
├── pubspec.yaml
├── README.md
└── test/
```

Short descriptions:

- `lib/core/` – shared utilities, models, validators and small widgets used across features.
- `lib/features/` – feature folders contain screens, services, notifiers and models scoped to a domain.
- `lib/firebase_options.dart` – generated by FlutterFire; keep it in sync with your Firebase project.

## Getting started

These steps get the app running locally.

Prerequisites

- Flutter SDK (compatible with `sdk: ^3.8.1`). Install from https://docs.flutter.dev/get-started/install
- Android Studio or Xcode for emulators/simulators
- A Firebase project and platform config files (`google-services.json` for Android and `GoogleService-Info.plist` for iOS)

Clone and install dependencies

```bash
git clone git@github.com:NewCode-Crafters/ncc-finance-mobile.git
cd ncc-finance-mobile
flutter pub get
```

Configure Firebase (demo)

For the classroom demo we'll provide the Firebase config files so teachers can run the app quickly. Drop the provided files into these exact paths in the project root:

- Android: `android/app/google-services.json`
- iOS: `ios/Runner/GoogleService-Info.plist`

You don't need to inspect or modify the files for the demo. After the evaluation phase we will rotate/change these demo credentials and restore the project to use the normal production configuration.

If you run into problems, contact **joeltonmatos@gmail.com** for assistance.

Run the app

```bash
# List devices
flutter devices

# Run on a device (replace <device-id>)
flutter run -d <device-id>
```

**Configuration**

- Localization: The app registers `pt_BR`. To add more locales, update `supportedLocales` in `lib/main.dart` and provide localized strings/resources.
- Firebase: Authentication, Firestore and Storage are used across features. Verify your Firebase project rules (for dev use, you can relax rules; for production tighten them).

<a id="ci-cd"></a>

## CI/CD

The project uses Codemagic (https://codemagic.io) for CI/CD. Pipelines are defined to validate PRs, build homologation (staging) artifacts, and produce production builds for release.

Pipeline overview

| Workflow           | Trigger                                                                   | Purpose                                                                                                                                                        |
| ------------------ | ------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `DEV-WORKFLOW`     | Pull requests from branches with prefixes `task/`, `fix/`, `enhancement/` | Run build/test steps to validate PRs before review.                                                                                                            |
| `HOMOLOG-WORKFLOW` | Pull requests from the `dev` branch                                       | Build staging artifacts for QA/Homolog. The workflow creates artifacts (like .apk ) and distributes in the Firebase App Distribution to the team test features |
| `PROD-WORKFLOW`    | Pushes to `main` or release tags                                          | Build production artifacts and trigger distribution.                                                                                                           |

## Available commands

- Install dependencies:

```bash
flutter pub get
```

- Analyze code:

```bash
flutter analyze
```

- Run tests:

```bash
flutter test
```

- Run on a device:

```bash
flutter run -d <device-id>
```

## Development notes

- State management: `provider` with `ChangeNotifier` notifiers.
- Persistence: Cloud Firestore for transactions, profiles and investments.
- Charts: `fl_chart` used in dashboard visualizations.
- Image handling: `image_picker` for selecting photos; `firebase_storage` to upload profile photos.
- Localization: `intl` is initialized in `main.dart` for `pt_BR` formatting.

## Key packages

The table below highlights the most important packages used in this project and their primary purpose.

| Package                                                  | Purpose                                                                    |
| -------------------------------------------------------- | -------------------------------------------------------------------------- |
| `firebase_core`                                          | Initializes and configures Firebase in the Flutter app.                    |
| `firebase_auth`                                          | Email/password authentication and user management.                         |
| `cloud_firestore`                                        | Main persistent NoSQL database for transactions, profiles and investments. |
| `firebase_storage`                                       | Stores and serves user-uploaded images (profile photos, attachments).      |
| `provider`                                               | State management using `ChangeNotifier` providers across the widget tree.  |
| `fl_chart`                                               | Draw charts and visualizations for dashboards and analytics.               |
| `image_picker`                                           | Select images from camera or gallery for profile and attachments.          |
| `intl`                                                   | Date and number localization and formatting (`pt_BR`).                     |
| `flutter_localizations`                                  | Flutter's built-in localization delegates (used with `intl`).              |
| `http`                                                   | HTTP client for calling external APIs (if needed).                         |
| `equatable`                                              | Value equality for model classes to simplify comparisons.                  |
| `flutter_native_splash`                                  | Generate and configure native splash screens.                              |
| `flutter_launcher_icons`                                 | Generates platform launcher icons from a single image.                     |
| `mockito`, `fake_cloud_firestore`, `firebase_auth_mocks` | Testing and mocking utilities for unit/widget tests.                       |
| `build_runner`                                           | Tooling for code generation tasks (if used by the project).                |
| `flutter_lints`                                          | Recommended lint rules for Flutter projects (developer tooling).           |

## Unit tests

Unit tests focus on core services and business rules. Tests use `fake_cloud_firestore`, `firebase_auth_mocks`, and `mockito` to isolate logic from Firebase and external services.

Key test files and intent:

- `test/features/transactions/services/financial_transaction_service_test.dart`
  - Ensures transactions can be created, listed (ordered by date), edited and deleted.
  - Verifies integration with `BalanceService` (updates called with correct amounts).
- `test/features/dashboard/services/balance_service_test.dart`
  - Validates balance retrieval and arithmetic when transactions update balances.
- `test/features/profile/services/profile_service_test.dart`
  - Confirms user profile retrieval maps Firestore data to domain models correctly.

TDD note:

- The core business rules (balance updates, transaction effects, profile mapping) were designed and validated using tests before UI was implemented. This TDD-inspired workflow helped capture edge cases and keep UI code focused on presentation.

## Troubleshooting

- Firebase initialization errors: ensure `google-services.json` / `GoogleService-Info.plist` match `firebase_options.dart` or re-run `flutterfire configure`.
- Plugin build errors: try `flutter pub upgrade` and confirm plugin versions in `pubspec.yaml` are compatible with your Flutter SDK.

## Authors

| Name              | GitHub Profile                                       | Profile Picture                                                                                                       |
| ----------------- | ---------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------- |
| Carlos Ferreira   | [@carlosrfjrdev](https://github.com/carlosrfjrdev)   | <img src="https://avatars.githubusercontent.com/u/107284563?v=4" width="40" height="40" style="border-radius:50%;" /> |
| Joelton Matos     | [@joeltonmats](https://github.com/joeltonmats)       | <img src="https://avatars.githubusercontent.com/u/4190757?v=4" width="40" height="40" style="border-radius:50%;" />   |
| Larissa Rocha     | [@larisr](https://github.com/larisr)                 | <img src="https://avatars.githubusercontent.com/u/64704731?v=4" width="40" height="40" style="border-radius:50%;" />  |
| Leonardo Medeiros | [@leomartinsm](https://github.com/leomartinsm)       | <img src="https://avatars.githubusercontent.com/u/20979905?v=4" width="40" height="40" style="border-radius:50%;" />  |
| Ricardo Momberg   | [@ricardomomberg](https://github.com/RicardoMomberg) | <img src="https://avatars.githubusercontent.com/u/65039145?v=4" width="40" height="40" style="border-radius:50%;" />  |

## External links

- **Video demo:** (placeholder) — add video link here.
- **Figma prototype:** https://www.figma.com/design/gB5nE8V4Le026J3y4FJxDQ/NCC-TC-3-prototipo?node-id=12085-1622&t=649czXOSHu6ZTlJI-1

TODO: Make the Figma prototype public before delivering the project.
